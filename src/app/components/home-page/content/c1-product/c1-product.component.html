<!-- <div class="alert alert-warning alert-dismissible fade show" role="alert">
    <strong>Một số lưu ý nhỏ!</strong> điều này có thể giúp ích được cho bạn khi ra đơn hàng.
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
    <ul *ngIf="">
        <li>20/10 lấy nhưng đơn hàng tặng phụ nữ</li>
        <li>Mùa đông đang đến gần ra những đơn hàng ấm áp</li>
        <li>JavaScript</li>
    </ul>
</div> -->
<!-- HEADER INCLUDE: Add button, delete button and refresh button -->
<div class="d-flex pb-2">
    <button type="button" class="btn btn-primary" (click)="openModalAddProduct()">
        <i class="fa fa-plus"></i>Thêm sản phẩm
    </button>
    <a id="openModalAdd" [hidden]="true" data-toggle="modal" data-target="#addProduct"></a>
    &nbsp;
    <button type="button" class="btn btn-danger">
        <i class="fa fa-times"></i>&nbsp;&nbsp;Xóa sản phẩm
    </button>
    &nbsp;
    <button type="button" class="btn btn-info">
        <i class="fa fa-refresh"></i>Làm mới
    </button>
    &nbsp;
    <!-- Dropdown sorting by condition -->
    <div class="dropdown show">
        <a class="btn btn-info dropdown-toggle text-white" href="#" role="button" id="dropdownMenuLink"
            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <i class="fa fa-filter"></i>&nbsp;&nbsp;Sắp xếp theo
        </a>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
            <a style="cursor: pointer;" class="dropdown-item">Mặc định</a>
            <a style="cursor: pointer;" class="dropdown-item">Tên
                sản phẩm A-Z</a>
            <a style="cursor: pointer;" class="dropdown-item">Tên
                sản phẩm Z-A</a>
            <a style="cursor: pointer;" class="dropdown-item">Ngày tạo
                giảm dần</a>
            <a style="cursor: pointer;" class="dropdown-item">Ngày cập
                nhật giảm dần</a>
        </div>
    </div>
    &nbsp;
    <button type="button" class="btn btn-warning">
        <i class="fa fa-filter"></i>Bộ lọc
    </button>
</div>
<!-- END HEADER INCLUDE: Add button, delete button and refresh button -->

<!-- DATA TABLE SHOW DATA AND HANDLE -->
<div class="card shadow">
    <!-- HEADER CARD TABLE -->
    <div class="card-header">
        <div class="d-flex justify-content-between">
            <div style="margin-left: -6px;">
                <h5 id="exampleModalLabel" style="color: #09133A;">Quản lý sản phẩm</h5>
            </div>
            <!-- SEARCHING FORM INPUT -->
            <form class="form-inline float-right">
                <input class="form-control" autofocus type="search" id="keywordSearch"
                    placeholder="Tìm kiếm theo tên danh mục..." aria-label="Search" id="keywordSearch"
                    name="keywordSearch">
            </form>
            <!-- END SEARCHING FORM INPUT -->
        </div>
    </div>
    <!-- END HEADER CARD TABLE -->
    <!-- BODY CARD TABLE -->
    <div class="card-body" style="height: 300px;">
        <!-- LIST TABLE DATA -->
        <div class="table-responsive scroll-table" style="height: 230px;">
            <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                <thead>
                    <tr>
                        <th style="width: 8%;"></th>
                        <th style="width: 20%;" class="justify-content-between">Tên sản phẩm&nbsp;&nbsp;
                            <i class="fa fa-sort"></i>
                            <!-- <i (click)="sortAlphabetColumn()" *ngIf="isReverse" class="fa fa-sort-desc"></i>
                            <i (click)="sortAlphabetColumn()" *ngIf="!isReverse" class="fa fa-sort-asc"></i> -->
                        </th>
                        <th style="width: 15%;">Danh mục&nbsp;&nbsp;
                            <i class="fa fa-sort"></i>
                            <!-- <i (click)="sortAlphabetColumn()" *ngIf="isReverse" class="fa fa-sort-desc"></i>
                            <i (click)="sortAlphabetColumn()" *ngIf="!isReverse" class="fa fa-sort-asc"></i> -->
                        </th>
                        <th style="width: 15%;">Thương hiệu&nbsp;&nbsp;
                            <i class="fa fa-sort"></i>
                            <!-- <i (click)="sortAlphabetColumn()" *ngIf="isReverse" class="fa fa-sort-desc"></i>
                            <i (click)="sortAlphabetColumn()" *ngIf="!isReverse" class="fa fa-sort-asc"></i> -->
                        </th>
                        <th style="width: 10%;text-align: right">Số lượng&nbsp;&nbsp;
                            <i class="fa fa-sort"></i>
                            <!-- <i (click)="sortDateColumn()" *ngIf="isReverse" class="fa fa-sort-desc"></i>
                            <i (click)="sortDateColumn()" *ngIf="isReverse" class="fa fa-sort-asc"></i> -->
                        </th>
                        <th style="width: 14%;text-align: right">Giá&nbsp;&nbsp;
                            <i class="fa fa-sort"></i>
                            <!-- <i (click)="sortDateColumn()" *ngIf="isReverse" class="fa fa-sort-desc"></i>
                            <i (click)="sortDateColumn()" *ngIf="isReverse" class="fa fa-sort-asc"></i> -->
                        </th>
                        <th style="width: 12%;text-align: center">Trạng thái</th>
                        <th style="width: 12%;text-align: center">Tác vụ</th>
                    </tr>
                </thead>
                <tbody *ngIf="listProduct.length != 0">
                    <tr id="mytable"
                        *ngFor="let item of listProduct | paginate: {itemsPerPage: pageSize, currentPage: page, totalItems: pageLength}">
                        <td>
                            <div class="custom-control custom-checkbox" style="margin-top: 9px;">
                                <input type="checkbox" class="checkbox-round" name="checkcategory">
                            </div>
                        </td>
                        <td>
                            {{
                            item?.productName == "" || item?.productName == null || item?.productName.length == 0
                            ? 'Dữ liệu trống'
                            : item?.productName.length > 20
                            ? item?.productName.substring(0, 20).concat('...')
                            : item?.productName
                            }}
                        </td>
                        <td>
                            {{
                            item?.category?.name == "" || item?.category?.name == null || item?.category?.name.length ==
                            0
                            ? 'Dữ liệu trống'
                            : item?.category?.name.length > 15
                            ? item?.category?.name.substring(0, 15).concat('...')
                            : item?.category?.name
                            }}
                        </td>
                        <td>
                            {{
                            item?.brand?.name == "" || item?.brand?.name == null || item?.brand?.name.length ==
                            0
                            ? 'Dữ liệu trống'
                            : item?.brand?.name.length > 15
                            ? item?.brand?.name.substring(0, 15).concat('...')
                            : item?.brand?.name
                            }}
                        </td>
                        <td style="text-align: right;">
                            {{item?.quantity}}
                        </td>
                        <td style="text-align: right;">
                            {{item?.price |currency:"VND":"symbol"}}
                        </td>
                        <td style="text-align: center;">
                            <span *ngIf="item?.status == 1" class="badge rounded-pill bg-warning badge-status">
                                Hàng mới nhập
                            </span>
                            <span *ngIf="item?.status == 2" class="badge rounded-pill bg-primary badge-status">
                                Trong kho
                            </span>
                            <span *ngIf="item?.status == 3" class="badge rounded-pill bg-success badge-status">
                                Đang bán
                            </span>
                            <span *ngIf="item?.status == 4" class="badge rounded-pill bg-danger badge-status">
                                Đang chờ nhập
                            </span>
                        </td>
                        <td style="text-align: center;">
                            <!-- Button show detail data -->
                            <a (click)="detailDataProduct(item?.id)"><i class="fa fa-eye text-success"></i></a>
                            <!-- Check data id exists if ok then click on openModalDetail -->
                            <a id="openModalDetail" [hidden]="true" data-toggle="modal"
                                data-target="#detailProduct"></a>
                            &nbsp;&nbsp;
                            <!-- Button update data category -->
                            <a><i class="fa fa-edit text-primary"></i></a>
                            <!-- Check data id exists if ok then click on openModalUpdate -->
                            <a id="openModalUpdate" [hidden]="true" data-toggle="modal"
                                data-target="#updateCategory"></a>
                            &nbsp;&nbsp;
                            <a><i class="fa fa-trash text-danger"></i></a>
                            <!-- Check data id exists if ok then click on openModalButton -->
                            <a id="openModalButton" [hidden]="true" data-toggle="modal"
                                data-target="#deleteCategory"></a>
                        </td>
                    </tr>
                </tbody>
            </table>
            <div *ngIf="listProduct.length == 0">
                <div class="container h-100">
                    <div class="row align-items-center h-100">
                        <div class="col-6 mx-auto">
                            <div class="text-center bg-white" style="padding-top: 50px;">
                                Oops...! Không có kết quả nào được tìm thấy
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- END LIST TABLE DATA -->
        <div class="pt-2"></div>
        <!-- PAGiNATION DATA TABLE -->
        <div class="d-flex">
            <div class="col-md-5 d-flex mr-auto pt-2">
                <span class="col-md-3" style="margin-left: -20px;">Hiển thị: </span>
                <select style="height: 33px;margin-top:-6px;margin-left: -28px;border: 1px solid #F1F1F1;"
                    class="form-control col-sm-2 border" placeholder="Select page" (change)='onOptionsSelected($event)'
                    id="exampleFormControlSelect1">
                    <option *ngFor="let pageSize of pageSizeOptions" [value]="pageSize">{{pageSize}}</option>
                </select>
            </div>
            <div class="d-flex">
                <span for="inputPassword" class="show-page-text col-md-10">Hiển thị {{pageSize}} trên
                    {{pageLength}} bản ghi</span>
                <form [formGroup]="formGoToPage" (ngSubmit)="submitGoToPage()">
                    <input type="text" formControlName="numberPage" class="goto-box-page form-control" value="{{page}}">
                </form>
            </div>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <div>
                <pagination-controls (pageChange)="onPageChange($event)" previousLabel="" nextLabel=""
                    screenReaderPaginationLabel="Pagination" screenReaderPageLabel="page"
                    screenReaderCurrentLabel="You're on page" [maxSize]="6" boundary-links="true">
                </pagination-controls>
            </div>
        </div>
        <!-- END PAGiNATION DATA TABLE -->
    </div>
    <!-- END BODY CARD TABLE -->
</div>
<!-- END DATA TABLE SHOW DATA AND HANDLE -->

<!-- MODAL ADD DATA -->
<div class="modal fade" id="addProduct" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    data-backdrop="static" data-keyboard="false" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Thêm sản phẩm</h5>
                <button type="button" class="close" (click)="confirmBeforeCloseAddProduct()">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form [formGroup]="formData">
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="exampleFormControlInput1">Tên sản phẩm <span
                                    class="important-input">*</span></label>
                            <input type="text" class="form-control" formControlName="productName" #input
                                name="productName" tab-index="1" (keyup)="renderForCodeSEO()" id="nameAddProduct"
                                placeholder="Tên sản phẩm"
                                [ngClass]="{
                                    'is-valid': (formData.controls?.productName?.valid && (formData.controls?.productName?.touched)),
                                    'is-invalid': (formData.controls?.productName?.invalid && (formData.controls?.productName?.touched))}">
                            <div *ngIf="formData.controls.productName.errors" class="invalid-feedback">
                                <div *ngIf="formData.controls.productName.errors?.required">Tên sản phẩm không để trống!
                                </div>
                                <!-- <div *ngIf="formData.controls.name.errors?.largeName">Tên thương hiệu không quá 30 ký
                                    tự!
                                </div> -->
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="exampleFormControlInput1">SeoURL</label>
                            <input type="text" tab-index="2" readonly class="form-control" formControlName="code"
                                name="code" id="code">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-3">
                            <label for="exampleFormControlSelect1">Nhà cung cấp <span
                                    class="important-input">*</span></label>
                            <select tab-index="3" (change)="changeSupplier($event)" required class="form-control"
                                formControlName="supplierId" placeholder="-- Chọn thương hiệu --" #input
                                [ngClass]="{
                                    'is-valid': (formData.controls?.supplierId?.valid && (formData.controls?.supplierId?.touched)),
                                    'is-invalid': (formData.controls?.supplierId?.invalid && (formData.controls?.supplierId?.touched))}">
                                <option value="" disabled>-- Chọn nhà cung cấp --</option>
                                <option *ngFor="let supplier of listSupplier" [value]="supplier.id">
                                    {{supplier?.supplierName != null ? supplier?.supplierName : 'Nhà cung cấp chưa chỉnh
                                    sửa' }}</option>
                            </select>
                            <!-- <ng-select ab-index="3" (change)="changeSupplier($event)" required class="form-control custom"
                                formControlName="supplierId" placeholder="-- Chọn thương hiệu --">
                                <ng-option [value]="" disabled>-- Chọn nhà cung cấp --</ng-option>
                                <ng-option *ngFor="let supplier of listSupplier" [value]="supplier.id">
                                    {{supplier?.supplierName != null ? supplier?.supplierName : 'Nhà cung cấp chưa chỉnh
                                    sửa' }}</ng-option>
                            </ng-select> -->
                            <div *ngIf="formData.controls.supplierId.errors" class="invalid-feedback">
                                <div *ngIf="formData.controls.supplierId.errors?.required">Vui lòng chọn nhà cung cấp!
                                </div>
                                <!-- <div *ngIf="formData.controls.name.errors?.largeName">Tên thương hiệu không quá 30 ký
                                    tự!
                                </div> -->
                            </div>
                        </div>
                        <div class="form-group col-md-3">
                            <label for="exampleFormControlSelect1">Công ty</label>
                            <input tab-index="4" type="text" class="form-control" value="{{companyName}}" readonly
                                name="name" id="" placeholder="">
                        </div>
                        <div class="form-group col-md-3">
                            <label for="exampleFormControlSelect1">Nghành nghề kinh doanh</label>
                            <input tab-index="5" type="text" class="form-control" value="{{businessLine}}" readonly
                                name="name" id="" placeholder="">
                        </div>
                        <div class="form-group col-md-3">
                            <label for="exampleFormControlSelect1">Địa chỉ</label>
                            <input tab-index="6" type="text" class="form-control" value="{{address}}" readonly
                                name="name" id="nameAddProduct" placeholder="">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-3">
                            <label for="exampleFormControlSelect1">Danh mục <span
                                    class="important-input">*</span></label>
                            <select (change)="changeCategory($event)" required class="form-control" tab-index="7"
                                formControlName="categoryId" placeholder="-- Chọn danh mục --" #input
                                [ngClass]="{
                                    'is-valid': (formData.controls?.categoryId?.valid && (formData.controls?.categoryId?.touched)),
                                    'is-invalid': (formData.controls?.categoryId?.invalid && (formData.controls?.categoryId?.touched))}">
                                <option value="" disabled>-- Chọn danh mục --</option>
                                <option *ngFor="let category of listCategories" [value]="category.id">{{category.name}}
                                </option>
                            </select>
                            <div *ngIf="formData.controls.categoryId.errors" class="invalid-feedback">
                                <div *ngIf="formData.controls.categoryId.errors?.required">Vui lòng chọn danh mục!
                                </div>
                                <!-- <div *ngIf="formData.controls.name.errors?.largeName">Tên thương hiệu không quá 30 ký
                                    tự!
                                </div> -->
                            </div>
                        </div>
                        <div class="form-group col-md-3">
                            <label for="exampleFormControlSelect1">Thương hiệu <span
                                    class="important-input">*</span></label>
                            <select (change)="changeBrand($event)" required class="form-control" tab-index="8"
                                formControlName="brandId" placeholder="-- Chọn thương hiệu --" #input
                                [ngClass]="{
                                    'is-valid': (formData.controls?.brandId?.valid && (formData.controls?.brandId?.touched)),
                                    'is-invalid': (formData.controls?.brandId?.invalid && (formData.controls?.brandId?.touched))}">
                                <option value="" disabled>-- Chọn thương hiệu --</option>
                                <option *ngFor="let brand of listBrands" [value]="brand.id">{{brand.name}}</option>
                            </select>
                            <div *ngIf="formData.controls.brandId.errors" class="invalid-feedback">
                                <div *ngIf="formData.controls.brandId.errors?.required">Vui lòng chọn thương hiệu!
                                </div>
                                <!-- <div *ngIf="formData.controls.name.errors?.largeName">Tên thương hiệu không quá 30 ký
                                    tự!
                                </div> -->
                            </div>
                        </div>
                        <div class="form-group col-md-3">
                            <label for="exampleFormControlSelect1">Số lượng <span
                                    class="important-input">*</span></label>
                            <input type="number" class="form-control" formControlName="quantity" name="quantity"
                                id="quantity" tab-index="9" placeholder="Nhập số lượng" [(ngModel)]="quantityModel"
                                [ngClass]="{
                                    'is-valid': (formData.controls?.quantity?.valid && (formData.controls?.quantity?.touched)),
                                    'is-invalid': (formData.controls?.quantity?.invalid && (formData.controls?.quantity?.touched))}">
                            <div *ngIf="formData.controls.quantity.errors" class="invalid-feedback">
                                <div *ngIf="formData.controls.quantity.errors?.required">Số lượng không để trống!
                                </div>
                            </div>
                        </div>
                        <div class="form-group col-md-3">
                            <label for="exampleFormControlSelect1">Trạng thái <span
                                    class="important-input">*</span></label>
                            <select (change)="changeStatus($event)" required class="form-control"
                                formControlName="status" placeholder="-- Chọn trạng thái --" tab-index="10"
                                [ngClass]="{
                                    'is-valid': (formData.controls?.status?.valid && (formData.controls?.status?.touched)),
                                    'is-invalid': (formData.controls?.status?.invalid && (formData.controls?.status?.touched))}">
                                <option value="" disabled>-- Chọn trạng thái --</option>
                                <option *ngFor="let status of listStatus" [value]="status.id">{{status.value}}</option>
                            </select>
                            <div *ngIf="formData.controls.status.errors" class="invalid-feedback">
                                <div *ngIf="formData.controls.status.errors?.required">Vui lòng chọn trạng thái!
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-2">
                            <label for="exampleFormControlSelect1">Giá nhập (VNĐ) <span
                                    class="important-input">*</span></label>
                            <input type="number" class="form-control" (keyup)="renderDiscountPrice()"
                                formControlName="oldPrice" name="modifiedBy" id="modifiedBy" tab-index="11"
                                placeholder="Nhập giá tiền khi nhập hàng"
                                [ngClass]="{
                                    'is-valid': (formData.controls?.oldPrice?.valid && (formData.controls?.oldPrice?.touched)),
                                    'is-invalid': (formData.controls?.oldPrice?.invalid && (formData.controls?.oldPrice?.touched))}">
                            <div *ngIf="formData.controls.oldPrice.errors" class="invalid-feedback">
                                <div *ngIf="formData.controls.oldPrice.errors?.required">Giá nhập không để trống!
                                </div>
                            </div>
                        </div>
                        <div class="form-group col-md-2">
                            <label for="exampleFormControlSelect1">Khuyến mãi (%) </label>
                            <input type="number" class="form-control" (keyup)="renderPriceWhenDiscount()"
                                formControlName="discount" name="discount" id="discount" tab-index="12"
                                placeholder="Nhập khuyến mãi">
                        </div>
                        <div class="form-group col-md-2">
                            <label for="exampleFormControlSelect1">Giá giảm (VNĐ)</label>
                            <input type="number" readonly class="form-control" formControlName="price" name="discount"
                                id="discount" tab-index="13">
                        </div>
                        <div class="form-group col-md-3">
                            <label for="exampleFormControlSelect1">Tổng giá ban đầu (VNĐ) </label>
                            <input type="number" class="form-control" formControlName="totalFirstPrice" readonly
                                name="totalFirstPrice" id="totalFirstPrice" tab-index="14"
                                placeholder="Tổng giá khi chưa nhập khuyến mãi">
                        </div>
                        <div class="form-group col-md-3">
                            <label for="exampleFormControlSelect1">Tổng giá khi giảm (VNĐ) </label>
                            <input type="number" class="form-control" formControlName="totalDiscountPrice" readonly
                                name="totalDiscountPrice" id="totalDiscountPrice" tab-index="15"
                                placeholder="Tổng giá khi đã nhập khuyến mãi">
                        </div>
                    </div>
                    <!-- {{quantity}} -->
                    <div class="form-row">
                        <div class="col-sm-10">
                            <div class="form-group">
                                <label for="exampleFormControlSelect1">Mô tả chi tiết <span class="text-warning">(Nên mô
                                        tả chi tiết sản phẩm và hình ảnh để SEO web tốt hơn)</span></label>
                                <!-- <textarea class="form-control" style="resize: none;" name="" id="" rows="5"></textarea> -->
                                <kendo-editor style="height: 200px;" formControlName="description" tab-index="16"
                                    [value]="descriptionProduct"></kendo-editor>
                            </div>
                        </div>
                        <div class="col-sm-2">
                            <div class="form-group">
                                <label for="upload-photo">Hình ảnh</label>
                                <!-- <div class="progress-bar bg-success" role="progressbar" style="width: 90%" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"></div> -->
                                <input type='file' formControlName="thumbnail" onchange="readURL(this);"
                                    (change)="onFileChanged($event)" tab-index="17"
                                    accept="image/gif, image/jpeg, image/png" />
                                <br>
                                <div *ngIf="stringImageURL == ''">
                                    <img id="blah" width="100%" height="150px"
                                        src="http://ssl.gstatic.com/accounts/ui/avatar_2x.png" alt="your image" />
                                </div>
                                <div *ngIf="stringImageURL != ''">
                                    <img id="blah" width="100%" height="150px"
                                        src="http://ssl.gstatic.com/accounts/ui/avatar_2x.png" alt="your image" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group text-right">
                        <button (click)="confirmBeforeCloseAddProduct()" tab-index="18" type="button"
                            class="btn btn-secondary">Đóng</button>
                        &nbsp;
                        <button type="button" (click)="submitDataProduct()" (keydown.Tab)="onKey($event);false;"
                            tab-index="19" class="btn btn-primary"><i class="fa fa-plus"></i>
                            Thêm</button>
                        <button hidden id="cancelSubmit" data-dismiss="modal" #closeBtn></button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- END MODAL ADD DATA -->

<!-- MODAL DETAIL DATA -->
<div class="modal fade" id="detailProduct" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Chi tiết sản phẩm</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="container">
                    <div class="row">
                        <div class="col-6 col-md-5 text-left" style="padding: 0;">

                        </div>
                        <div class="col-md-7 bg-warning">
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
<!-- END MODAL DETAIL DATA -->